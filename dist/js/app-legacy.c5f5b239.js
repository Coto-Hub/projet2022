(function(){"use strict";var e={4392:function(e,t,n){n(6992),n(8674),n(9601),n(7727);var r=n(8935),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MainDisplay",{attrs:{"app-title":"Evaluations"}},[n("div",{staticClass:"container",attrs:{id:"app"}},[n("nav",[n("router-link",{attrs:{to:"/home"}},[e._v("Home")]),n("router-link",{attrs:{to:"/classrooms"}},[e._v("Group")]),n("router-link",{attrs:{to:"/evaluations"}},[e._v("Evaluations")]),n("router-link",{attrs:{to:"/rate"}},[e._v("Evaluer")])],1),n("router-view")],1)])},s=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("header",{staticClass:"header"},[n("h1",[e._v(e._s(e.appTitle))])]),n("main",[e._t("default")],2),e._m(0)])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer"},[n("h1",{staticClass:"footer_text"},[e._v("Site by Coto & Alexis")])])}],u={name:"MainDisplay",props:{appTitle:String}},c=u,l=n(1001),d=(0,l.Z)(c,i,o,!1,null,"f4a844cc",null),m=d.exports,p={components:{MainDisplay:m}},f=p,v=(0,l.Z)(f,a,s,!1,null,null,null),h=v.exports,g=n(81),b=n(6978),w=n(9009),_=n(2809),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Home")],1)},y=[],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"})},k=[],R={name:"Home"},D=R,S=(0,l.Z)(D,C,k,!1,null,null,null),I=S.exports,Z={name:"HomeView",components:{Home:I}},A=Z,T=(0,l.Z)(A,x,y,!1,null,null,null),E=T.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BasicListDisplay",{attrs:{title:e.title,"element-list":e.classrooms,ready:e.ready,"mutable-object-add":e.studentToAdd,"message-display-condition":e.showCondition,"element-list-left":"Nom du groupe","element-list-right":"Intéraction"},scopedSlots:e._u([{key:"element_show_display",fn:function(t){return[n("div",{staticClass:"listItemLeft"},[e._v(" "+e._s(t.element.name)+" ")]),n("div",{staticClass:"listItemRight"},[n("router-link",{attrs:{to:{name:"ShowOneClassroom",params:{id:t.element.id_class}}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)],1)]}},{key:"input_field",fn:function(t){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.name,expression:"slotProps.mutable.name"}],attrs:{placeholder:"Nom du groupe",type:"text"},domProps:{value:t.mutable.name},on:{input:function(n){n.target.composing||e.$set(t.mutable,"name",n.target.value)}}}),n("button",{staticClass:"btn add-button",attrs:{disabled:e.addDisabled},on:{click:e.addClass}},[e._v("Ajouter")])]}}])})},j=[],P=n(6198),F=(n(8309),n(8975),n(1539),n(7327),n(6699),n(2023),{getDb:function(){return(0,P.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=window.indexedDB.open("evaluationDB",1);n.onerror=function(){t("Error")},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("classroom",{autoIncrement:!0,keyPath:"id_class"}),t.createObjectStore("evaluation",{autoIncrement:!0,keyPath:"id_eval"}),t.createObjectStore("student",{autoIncrement:!0,keyPath:"id_student"}),t.createObjectStore("criteria",{autoIncrement:!0,keyPath:"id_crit"}),t.createObjectStore("rating",{autoIncrement:!0,keyPath:"id_rat"}),t.createObjectStore("currently_rating",{autoIncrement:!0,keyPath:"id_curr"})}})));case 1:case"end":return e.stop()}}),e)})))()},addClassToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["classroom"],"readwrite").objectStore("classroom").add(t);r.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},deleteClassFromDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["student"],"readwrite").objectStore("student").openCursor().onsuccess=function(n){var r=n.target.result;r&&(parseInt(r.value.id_class)===parseInt(t)&&F.deleteStudentToDb(e,r.value),r.continue())};var r=e.transaction(["classroom"],"readwrite").objectStore("classroom").delete(t);r.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},getClassroomFromDb:function(e){return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.transaction(["classroom"],"readwrite").objectStore("classroom").getAll().onsuccess=function(e){t(e.target.result)}})));case 1:case"end":return t.stop()}}),t)})))()},getClassNameFromDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["classroom"],"readwrite").objectStore("classroom").get(t).onsuccess=function(e){n(e.target.result.name)}})));case 1:case"end":return n.stop()}}),n)})))()},updateClassToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["classroom"],"readwrite").objectStore("classroom"),a=r.get(t.id_class);a.onsuccess=function(){r.put(t).onsuccess=function(){n()}}})));case 1:case"end":return n.stop()}}),n)})))()},getStudentOfClassFromDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=[];e.transaction(["student"],"readonly").objectStore("student").openCursor().onsuccess=function(e){var a=e.target.result;a?(parseInt(a.value.id_class)===parseInt(t)&&r.push(a.value),a.continue()):n(r)}})));case 1:case"end":return n.stop()}}),n)})))()},getStudentFromDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["student"],"readwrite").objectStore("student").get(t).onsuccess=function(e){n(e.target.result)}})));case 1:case"end":return n.stop()}}),n)})))()},addStudentToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["student"],"readwrite").objectStore("student").add(t);r.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},updateStudentToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["student"],"readwrite").objectStore("student"),a=r.get(t.id_student);a.onsuccess=function(){r.put(t).onsuccess=function(){n()}}})));case 1:case"end":return n.stop()}}),n)})))()},deleteStudentToDb:function(e,t){var n=this;return(0,P.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.deleteRatingOfStudent(e,t.id_student);case 2:return r.abrupt("return",new Promise((function(n){e.transaction(["student"],"readwrite").objectStore("student").delete(t.id_student),n()})));case 3:case"end":return r.stop()}}),r)})))()},addEvalToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["evaluation"],"readwrite").objectStore("evaluation").add(t);r.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},updateEvalToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["evaluation"],"readwrite").objectStore("evaluation"),a=r.get(t.id_eval);a.onsuccess=function(){r.put(t).onsuccess=function(){n()}}})));case 1:case"end":return n.stop()}}),n)})))()},deleteEvalFromDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["criteria"],"readwrite").objectStore("criteria").openCursor().onsuccess=function(n){var r=n.target.result;r&&(parseInt(r.value.id_eval)===parseInt(t)&&F.deleteCriteriaToDb(e,r.value),r.continue())};var r=e.transaction(["evaluation"],"readwrite").objectStore("evaluation").delete(t);r.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},getEvaluationFromDb:function(e){return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.transaction(["evaluation"],"readwrite").objectStore("evaluation").getAll().onsuccess=function(e){t(e.target.result)}})));case 1:case"end":return t.stop()}}),t)})))()},getEvaluationNameFromDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["evaluation"],"readwrite").objectStore("evaluation").get(t).onsuccess=function(e){n(e.target.result.name)}})));case 1:case"end":return n.stop()}}),n)})))()},getCriteriasFromDb:function(e,t){return new Promise((function(n){var r=[];e.transaction(["criteria"],"readonly").objectStore("criteria").openCursor().onsuccess=function(e){var n=e.target.result;n&&(parseInt(n.value.id_eval)===parseInt(t)&&r.push(n.value),n.continue())},n(r)}))},addCriteriaToDb:function(e,t){return new Promise((function(n){var r=e.transaction(["criteria"],"readwrite").objectStore("criteria").add(t);r.onsuccess=function(){n()}}))},updateCriteriaToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["criteria"],"readwrite").objectStore("criteria"),a=r.get(t.id_crit);a.onsuccess=function(){r.put(t).onsuccess=function(){n()}}})));case 1:case"end":return n.stop()}}),n)})))()},deleteCriteriaToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["rating"],"readwrite").objectStore("rating");r.openCursor().onsuccess=function(e){var n=e.target.result;n&&(parseInt(n.value.id_crit)===parseInt(t.id_crit)&&r.delete(n.value.id_rat),n.continue())};var a=e.transaction(["criteria"],"readwrite").objectStore("criteria").delete(t.id_crit);a.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},getCurrentlyRatingFromDb:function(e){return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.transaction(["currently_rating"],"readwrite").objectStore("currently_rating").getAll().onsuccess=function(e){t(e.target.result)}})));case 1:case"end":return t.stop()}}),t)})))()},addCurrentlyRatedtToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["currently_rating"],"readwrite").objectStore("currently_rating").add(t);r.onsuccess=function(){n()}})));case 1:case"end":return n.stop()}}),n)})))()},deleteCurrentlyRatingToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["currently_rating"],"readwrite").objectStore("currently_rating").delete(t.id_curr),n()})));case 1:case"end":return n.stop()}}),n)})))()},getRatingOfStudentFromDb:function(e,t,n){return(0,P.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){var a=[];e.transaction(["rating"],"readonly").objectStore("rating").openCursor().onsuccess=function(e){var s=e.target.result;s?(parseInt(s.value.id_student)===parseInt(t)&&parseInt(s.value.id_crit)===parseInt(n)&&a.push(s.value),s.continue()):r(a)}})));case 1:case"end":return r.stop()}}),r)})))()},getRatingFromDb:function(e,t,n,r){return(0,P.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a){var s=[],i=[];e.transaction(["student"],"readonly").objectStore("student").openCursor().onsuccess=function(o){var u=o.target.result;u?(parseInt(u.value.id_class)===parseInt(t)&&i.push(parseInt(u.value.id_student)),u.continue()):(i=i.filter((function(e){return e!==parseInt(r)})),e.transaction(["rating"],"readonly").objectStore("rating").openCursor().onsuccess=function(e){var t=e.target.result;t?(!0===i.includes(parseInt(t.value.id_student))&&parseInt(t.value.id_crit)===parseInt(n)&&s.push(parseInt(t.value.score)),t.continue()):a(s)})}})));case 1:case"end":return a.stop()}}),a)})))()},updateRatingToDb:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.transaction(["rating"],"readonly").objectStore("rating").openCursor().onsuccess=function(r){var a=r.target.result;if(a)parseInt(a.value.id_student)===t.id_student&&parseInt(a.value.id_crit)===parseInt(t.id_crit)&&(t.id_rat=a.value.id_rat),a.continue();else{var s=null;s=t.id_rat?e.transaction(["rating"],"readwrite").objectStore("rating").put(t):e.transaction(["rating"],"readwrite").objectStore("rating").add(t),s.onsuccess=function(){n()}}}})));case 1:case"end":return n.stop()}}),n)})))()},getAvgStudent:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=0,a=0;e.transaction(["rating"],"readonly").objectStore("rating").openCursor().onsuccess=function(e){var s=e.target.result;s?(parseInt(s.value.id_student)===t&&(r+=s.value.score,a++),s.continue()):(isNaN(r/a)||n(Math.round(r/a*100)/100),n("--"))}})));case 1:case"end":return n.stop()}}),n)})))()},isCompletRatingStudent:function(e,t,n){return(0,P.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){var a=0,s=0;e.transaction(["rating"],"readonly").objectStore("rating").openCursor().onsuccess=function(i){var o=i.target.result;o?(parseInt(o.value.id_student)===parseInt(t)&&a++,o.continue()):e.transaction(["criteria"],"readonly").objectStore("criteria").openCursor().onsuccess=function(e){var t=e.target.result;t?(parseInt(t.value.id_eval)===parseInt(n)&&s++,t.continue()):r(a===s)}}})));case 1:case"end":return r.stop()}}),r)})))()},deleteRatingOfStudent:function(e,t){return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=e.transaction(["rating"],"readwrite").objectStore("rating");r.openCursor().onsuccess=function(e){var a=e.target.result;a?(parseInt(a.value.id_student)===parseInt(t)&&r.delete(a.value.id_rat),a.continue()):n()}})));case 1:case"end":return n.stop()}}),n)})))()}}),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready?n("div",{staticClass:"basicDisplay"},[n("h1",[e._v(e._s(e.title))]),n("div",[e._t("element_display",null,{mutable:e.mutableObjectUpdate})],2),n("ul",{staticClass:"list"},[n("li",{staticClass:"listItem"},[n("div",{staticClass:"info"},[n("div",{staticClass:"listItemLeft"},[e._v(" "+e._s(e.elementListLeft)+" ")]),n("div",{staticClass:"listItemRight"},[e._v(" "+e._s(e.elementListRight)+" ")])])]),e._l(e.elementList,(function(t){return n("li",{key:t.id,staticClass:"listItem"},[t.updated?n("div",[e._t("element_update_display",null,{element:t})],2):n("div",[e._t("element_show_display",null,{element:t})],2)])}))],2),n("div",{staticClass:"add display-input"},[e._t("input_field",null,{mutable:e.mutableObjectAdd}),n("p",{staticClass:"warning"},[e._v(e._s(e.warningMessage))])],2)]):e._e()},L=[],B={name:"BasicListDisplay",props:{elementListLeft:String,elementListRight:String,ready:Boolean,elementList:Array,title:String,mutableObjectAdd:Object,mutableObjectUpdate:Object,messageDisplayCondition:Boolean},computed:{warningMessage:function(){return this.messageDisplayCondition?"":"Veuillez remplir le(s) champ(s)"}},methods:{}},G=B,M=(0,l.Z)(G,O,L,!1,null,null,null),U=M.exports,$={name:"ClassView",components:{BasicListDisplay:U},props:{},data:function(){return{title:"Gestion des groupes",db:null,ready:!1,addDisabled:!1,classrooms:[],studentToAdd:{name:""}}},created:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getDb();case 2:return e.db=t.sent,t.next=5,F.getClassroomFromDb(e.db);case 5:e.classrooms=t.sent,e.ready=!0;case 7:case"end":return t.stop()}}),t)})))()},computed:{showCondition:function(){return""!==this.studentToAdd.name}},methods:{addClass:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addDisabled=!0,n={name:e.studentToAdd.name},t.next=4,F.addClassToDb(e.db,n);case 4:return t.next=6,F.getClassroomFromDb(e.db);case 6:e.classrooms=t.sent,e.addDisabled=!1;case 8:case"end":return t.stop()}}),t)})))()},deleteClass:function(e){var t=this;return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,F.deleteClassFromDb(t.db,e);case 2:return n.next=4,F.getClassroomFromDb(t.db);case 4:t.classrooms=n.sent;case 5:case"end":return n.stop()}}),n)})))()}}},V=$,z=(0,l.Z)(V,N,j,!1,null,null,null),H=z.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("BasicListDisplay",{attrs:{"element-list":e.students,ready:e.ready,"mutable-object-add":e.studentToAdd,title:e.title,"mutable-object-update":e.nameToUpdate,"message-display-condition":e.showCondition,"element-list-left":"Prénom - Nom","element-list-right":"Intéraction"},scopedSlots:e._u([{key:"element_display",fn:function(t){return[n("div",{staticClass:"headerList"},[n("div",{staticClass:"headerLeft"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.name,expression:"slotProps.mutable.name"}],attrs:{type:"text"},domProps:{value:t.mutable.name},on:{input:function(n){n.target.composing||e.$set(t.mutable,"name",n.target.value)}}}),e.showUpdateClassName?n("a",{staticClass:"check",on:{click:e.updateClassName}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1):n("a",{staticClass:"check disabled"},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1)]),n("div",{staticClass:"headerRight"},[n("a",{staticClass:"upload",on:{click:function(t){e.showImport=!0}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-upload"}})],1),n("a",{staticClass:"delete",on:{click:function(t){e.showAlert=!0}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])])]}},{key:"element_update_display",fn:function(t){return[n("div",{staticClass:"listItemLeft display-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.element.firstname,expression:"slotProps.element.firstname"}],attrs:{type:"text"},domProps:{value:t.element.firstname},on:{input:function(n){n.target.composing||e.$set(t.element,"firstname",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.element.lastname,expression:"slotProps.element.lastname"}],attrs:{type:"text"},domProps:{value:t.element.lastname},on:{input:function(n){n.target.composing||e.$set(t.element,"lastname",n.target.value)}}})]),n("div",{staticClass:"listItemRight"},[n("a",{staticClass:"check",on:{click:function(n){return e.updateStudent(t.element)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1),n("a",{staticClass:"delete",on:{click:function(n){return e.deleteStudent(t.element)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])]}},{key:"element_show_display",fn:function(t){return[n("div",{staticClass:"listItemLeft"},[e._v(" "+e._s(t.element.firstname)+" - "+e._s(t.element.lastname)+" ")]),n("div",{staticClass:"listItemRight"},[n("a",{staticClass:"update",on:{click:function(n){return e.toggleUpdateStudent(t.element)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)])]}},{key:"input_field",fn:function(t){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.firstname,expression:"slotProps.mutable.firstname"}],attrs:{placeholder:"Prénom",type:"text"},domProps:{value:t.mutable.firstname},on:{input:function(n){n.target.composing||e.$set(t.mutable,"firstname",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.lastname,expression:"slotProps.mutable.lastname"}],attrs:{placeholder:"Nom",type:"text"},domProps:{value:t.mutable.lastname},on:{input:function(n){n.target.composing||e.$set(t.mutable,"lastname",n.target.value)}}}),n("button",{staticClass:"mt-4 btn add-button",attrs:{disabled:e.addDisabled},on:{click:e.addStudent}},[e._v("Ajouter")])]}}])}),e.showAlert?n("BasicAlertDisplay",{attrs:{ready:e.ready,"is-little":!0},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("h1",[e._v("Alerte")]),n("p",[e._v("Voulez-vous vraiment supprimer ce groupe ?")])]},proxy:!0},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn delete-button",attrs:{disabled:e.deleteDisabled},on:{click:e.deleteClass}},[e._v("Supprimer")]),n("button",{staticClass:"btn cancel-button",attrs:{disabled:e.cancelDisabled},on:{click:function(t){e.showAlert=!1}}},[e._v("Annuler")])]},proxy:!0}],null,!1,2837483475)}):e._e(),e.showImport?n("BasicAlertDisplay",{attrs:{ready:e.ready,message:"Veuillez renseigner un fichier .cvs","show-message":e.showError,"is-little":!1},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("h1",[e._v("Importer une liste")]),n("p",[e._v("Selectionner un fichier")]),n("input",{ref:"file",attrs:{type:"file"}})]},proxy:!0},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn add-button",attrs:{disabled:e.deleteDisabled},on:{click:e.importStudent}},[e._v("Ajouter")]),n("button",{staticClass:"btn cancel-button",attrs:{disabled:e.cancelDisabled},on:{click:function(t){e.showImport=!1}}},[e._v("Annuler")])]},proxy:!0}],null,!1,877271373)}):e._e()],1)},q=[],J=n(7965),K=(n(4916),n(3123),n(3210),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready?n("div",{staticClass:"basicAlertDisplay"},[n("div",{staticClass:"alertBox",class:e.isLittle?" little":"middle"},[n("div",{staticClass:"headerBox"},[e._t("element_display")],2),n("div",{staticClass:"footerBox"},[e._t("input_field")],2),e.showMessage?n("p",{staticClass:"red"},[e._v(e._s(e.message))]):e._e()])]):e._e()}),Q=[],W={name:"BasicAlertDisplay",props:{ready:Boolean,message:String,showMessage:Boolean,isLittle:Boolean},computed:{},methods:{}},X=W,ee=(0,l.Z)(X,K,Q,!1,null,null,null),te=ee.exports,ne={name:"OneClassView",components:{BasicAlertDisplay:te,BasicListDisplay:U},props:{},data:function(){return{title:"Gestion des groupes",db:null,id:null,ready:!1,addDisabled:!1,deleteDisabled:!1,cancelDisabled:!1,showAlert:!1,showError:!1,showImport:!1,students:[],lignes:[],defaultName:"",studentToAdd:{firstname:"",lastname:""},nameToUpdate:{name:""}}},computed:{showCondition:function(){return""!==this.studentToAdd.firstname&&""!==this.studentToAdd.lastname},showUpdateClassName:function(){return this.defaultName!==this.nameToUpdate.name}},created:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getDb();case 2:return e.db=t.sent,e.id=parseInt(e.$route.params.id),t.next=6,F.getStudentOfClassFromDb(e.db,e.id);case 6:return e.students=t.sent,t.next=9,F.getClassNameFromDb(e.db,e.id);case 9:e.nameToUpdate.name=t.sent,e.defaultName=e.nameToUpdate.name,e.ready=!0;case 12:case"end":return t.stop()}}),t)})))()},methods:{toggleUpdateStudent:function(e){var t=this.students.indexOf(e);return t>=0&&(e.updated=!e.updated,r.Z.set(this.students,t,e)),!1},importStudent:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.file.files[0],r=e.id,a=e.db,n){t.next=6;break}return e.showError=!0,t.abrupt("return");case 6:if(!n.name.includes(".csv")){t.next=15;break}return t.next=9,new Promise((function(e){var t=new FileReader;t.onload=function(){var t=(0,P.Z)(regeneratorRuntime.mark((function t(n){var s,i,o,u,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=n.target.result.split("\n"),i=(0,J.Z)(s),t.prev=2,i.s();case 4:if((o=i.n()).done){t.next=14;break}if(u=o.value,c=u.trim().split(";"),c.length<2&&(c=u.trim().split(",")),2!==c.length){t.next=12;break}return l={id_class:r,firstname:c[0],lastname:c[1]},t.next=12,F.addStudentToDb(a,l);case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](2),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:e();case 23:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));return function(e){return t.apply(this,arguments)}}(),t.readAsText(n)}));case 9:return t.next=11,F.getStudentOfClassFromDb(e.db,e.id);case 11:e.students=t.sent,e.addDisabled=!1,t.next=16;break;case 15:e.showError=!0;case 16:e.showImport=!1;case 17:case"end":return t.stop()}}),t)})))()},updateStudent:function(e){var t=this;return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.toggleUpdateStudent(e),n.next=3,F.updateStudentToDb(t.db,e);case 3:case"end":return n.stop()}}),n)})))()},deleteClass:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getCurrentlyRatingFromDb(e.db);case 2:if(n=t.sent,0===n.length){t.next=7;break}if(n[0].id_class!==e.id){t.next=7;break}return t.next=7,F.deleteCurrentlyRatingToDb(e.db,n[0]);case 7:return t.next=9,F.deleteClassFromDb(e.db,e.id);case 9:e.$router.push({name:"ShowClassrooms"});case 10:case"end":return t.stop()}}),t)})))()},updateClassName:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.defaultName=e.nameToUpdate.name,t.next=3,F.updateClassToDb(e.db,{id_class:e.id,name:e.nameToUpdate.name});case 3:case"end":return t.stop()}}),t)})))()},deleteStudent:function(e){var t=this;return(0,P.Z)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.students.indexOf(e),a>=0&&(e.updated=!e.updated,r.Z["delete"](t.students,a)),n.next=4,F.deleteStudentToDb(t.db,e);case 4:case"end":return n.stop()}}),n)})))()},addStudent:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.studentToAdd.firstname||""===e.studentToAdd.lastname){t.next=11;break}return e.addDisabled=!0,n={id_class:e.id,firstname:e.studentToAdd.firstname,lastname:e.studentToAdd.lastname},t.next=5,F.addStudentToDb(e.db,n);case 5:return t.next=7,F.getStudentOfClassFromDb(e.db,e.id);case 7:e.students=t.sent,e.studentToAdd.firstname="",e.studentToAdd.lastname="",e.addDisabled=!1;case 11:case"end":return t.stop()}}),t)})))()}}},re=ne,ae=(0,l.Z)(re,Y,q,!1,null,null,null),se=ae.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BasicListDisplay",{attrs:{title:e.title,"element-list":e.evaluations,ready:e.ready,"mutable-object-add":e.evaluationToAdd,"message-display-condition":e.showCondition,"element-list-left":"Nom de l'évaluation","element-list-right":"Intéraction"},scopedSlots:e._u([{key:"element_show_display",fn:function(t){return[n("div",{staticClass:"listItemLeft"},[e._v(" "+e._s(t.element.name)+" ")]),n("div",{staticClass:"listItemRight"},[n("router-link",{attrs:{to:{name:"ShowOneEvaluation",params:{id:t.element.id_eval}}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)],1)]}},{key:"input_field",fn:function(t){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.name,expression:"slotProps.mutable.name"}],attrs:{placeholder:"Nom de l'évaluation",type:"text"},domProps:{value:t.mutable.name},on:{input:function(n){n.target.composing||e.$set(t.mutable,"name",n.target.value)}}}),n("button",{staticClass:"btn add-button",attrs:{disabled:e.addDisabled},on:{click:e.addEvaluation}},[e._v("Ajouter")])]}}])})},oe=[],ue={name:"EvaluationView",components:{BasicListDisplay:U},props:{},data:function(){return{title:"Gestion des évaluations",db:null,ready:!1,addDisabled:!1,evaluations:[],evaluationToAdd:{name:""}}},computed:{showCondition:function(){return""!==this.evaluationToAdd.name}},created:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getDb();case 2:return e.db=t.sent,t.next=5,F.getEvaluationFromDb(e.db);case 5:e.evaluations=t.sent,e.ready=!0;case 7:case"end":return t.stop()}}),t)})))()},methods:{addEvaluation:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.evaluationToAdd.name){t.next=10;break}return e.addDisabled=!0,n={name:e.evaluationToAdd.name},t.next=5,F.addEvalToDb(e.db,n);case 5:return t.next=7,F.getEvaluationFromDb(e.db);case 7:e.evaluations=t.sent,e.evaluationToAdd.name="",e.addDisabled=!1;case 10:case"end":return t.stop()}}),t)})))()}}},ce=ue,le=(0,l.Z)(ce,ie,oe,!1,null,null,null),de=le.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("BasicListDisplay",{attrs:{"element-list":e.criterias,ready:e.ready,"mutable-object-add":e.criteriaToAdd,title:e.title,"mutable-object-update":e.nameToUpdate,"message-display-condition":e.showCondition,"element-list-left":"Nom du critére","element-list-right":"Intéraction"},scopedSlots:e._u([{key:"element_display",fn:function(t){return[n("div",{staticClass:"headerList"},[n("div",{staticClass:"headerLeft"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.name,expression:"slotProps.mutable.name"}],attrs:{type:"text"},domProps:{value:t.mutable.name},on:{input:function(n){n.target.composing||e.$set(t.mutable,"name",n.target.value)}}}),e.showUpdateEvalName?n("a",{staticClass:"check",on:{click:e.updateEvalName}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1):n("a",{staticClass:"check disabled"},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1)]),n("div",{staticClass:"headerRight"},[n("a",{staticClass:"upload",on:{click:function(t){e.showImport=!0}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-upload"}})],1),n("a",{staticClass:"delete",on:{click:function(t){e.showAlert=!0}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])])]}},{key:"element_update_display",fn:function(t){return[n("div",{staticClass:"listItemLeft display-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.element.name_crit,expression:"slotProps.element.name_crit"}],attrs:{type:"text"},domProps:{value:t.element.name_crit},on:{input:function(n){n.target.composing||e.$set(t.element,"name_crit",n.target.value)}}})]),n("div",{staticClass:"listItemRight"},[n("a",{staticClass:"check",on:{click:function(n){return e.updateCriteria(t.element)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1),n("a",{staticClass:"delete",on:{click:function(n){return e.deleteCriteria(t.element)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])]}},{key:"element_show_display",fn:function(t){return[n("div",{staticClass:"listItemLeft"},[e._v(" "+e._s(t.element.name_crit)+" ")]),n("div",{staticClass:"listItemRight"},[n("a",{staticClass:"update",on:{click:function(n){return e.toggleUpdateCriteria(t.element)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)])]}},{key:"input_field",fn:function(t){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mutable.name_crit,expression:"slotProps.mutable.name_crit"}],attrs:{placeholder:"Nom du critére",type:"text"},domProps:{value:t.mutable.name_crit},on:{input:function(n){n.target.composing||e.$set(t.mutable,"name_crit",n.target.value)}}}),n("button",{staticClass:"btn add-button",attrs:{disabled:e.addDisabled},on:{click:e.addCriteria}},[e._v("Ajouter")])]}}])}),e.showAlert?n("BasicAlertDisplay",{attrs:{ready:e.ready,"is-little":!0},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("h1",[e._v("Alerte")]),n("p",[e._v("Voulez-vous vraiment supprimer cette évaluation ?")])]},proxy:!0},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn delete-button",attrs:{disabled:e.deleteDisabled},on:{click:e.deleteEval}},[e._v("Supprimer")]),n("button",{staticClass:"btn cancel-button",attrs:{disabled:e.cancelDisabled},on:{click:function(t){e.showAlert=!1}}},[e._v("Annuler")])]},proxy:!0}],null,!1,259672870)}):e._e(),e.showImport?n("BasicAlertDisplay",{attrs:{ready:e.ready,message:"Veuillez renseigner un fichier .cvs","show-message":e.showError,"is-little":!1},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("h1",[e._v("Importer une liste")]),n("p",[e._v("Selectionner un fichier")]),n("input",{ref:"file",attrs:{type:"file"}})]},proxy:!0},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn add-button",attrs:{disabled:e.deleteDisabled},on:{click:e.importCriteria}},[e._v("Ajouter")]),n("button",{staticClass:"btn cancel-button",attrs:{disabled:e.cancelDisabled},on:{click:function(t){e.showImport=!1}}},[e._v("Annuler")])]},proxy:!0}],null,!1,1223466711)}):e._e()],1)},pe=[],fe={name:"OneEvaluationView",components:{BasicAlertDisplay:te,BasicListDisplay:U},props:{},data:function(){return{title:"Gestion des critéres",db:null,id:null,ready:!1,addDisabled:!1,deleteDisabled:!1,cancelDisabled:!1,showAlert:!1,showError:!1,showImport:!1,criterias:[],defaultName:"",criteriaToAdd:{name_crit:""},nameToUpdate:{name:""}}},computed:{showCondition:function(){return""!==this.criteriaToAdd.name_crit},showUpdateEvalName:function(){return this.defaultName!==this.nameToUpdate.name}},created:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getDb();case 2:return e.db=t.sent,e.id=parseInt(e.$route.params.id),t.next=6,F.getCriteriasFromDb(e.db,e.id);case 6:return e.criterias=t.sent,t.next=9,F.getEvaluationNameFromDb(e.db,e.id);case 9:e.nameToUpdate.name=t.sent,e.defaultName=e.nameToUpdate.name,e.ready=!0;case 12:case"end":return t.stop()}}),t)})))()},methods:{toggleUpdateCriteria:function(e){var t=this.criterias.indexOf(e);return t>=0&&(e.updated=!e.updated,r.Z.set(this.criterias,t,e)),!1},deleteEval:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getCurrentlyRatingFromDb(e.db);case 2:if(n=t.sent,0===n.length){t.next=7;break}if(n[0].id_eval!==e.id){t.next=7;break}return t.next=7,F.deleteCurrentlyRatingToDb(e.db,n[0]);case 7:return t.next=9,F.deleteEvalFromDb(e.db,e.id);case 9:e.$router.push({name:"ShowEvaluations"});case 10:case"end":return t.stop()}}),t)})))()},updateEvalName:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.defaultName=e.nameToUpdate.name,t.next=3,F.updateEvalToDb(e.db,{id_eval:e.id,name:e.nameToUpdate.name});case 3:case"end":return t.stop()}}),t)})))()},updateCriteria:function(e){var t=this;return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.toggleUpdateCriteria(e),n.next=3,F.updateCriteriaToDb(t.db,e);case 3:case"end":return n.stop()}}),n)})))()},deleteCriteria:function(e){var t=this;return(0,P.Z)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.criterias.indexOf(e),a>=0&&(e.updated=!e.updated,r.Z["delete"](t.criterias,a)),n.next=4,F.deleteCriteriaToDb(t.db,e);case 4:case"end":return n.stop()}}),n)})))()},addCriteria:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.criteriaToAdd.name_crit){t.next=10;break}return e.addDisabled=!0,n={id_eval:e.id,name_crit:e.criteriaToAdd.name_crit},t.next=5,F.addCriteriaToDb(e.db,n);case 5:return t.next=7,F.getCriteriasFromDb(e.db,e.id);case 7:e.criterias=t.sent,e.criteriaToAdd.name_crit="",e.addDisabled=!1;case 10:case"end":return t.stop()}}),t)})))()},importCriteria:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.file.files[0],r=e.id,a=e.db,n){t.next=6;break}return e.showError=!0,t.abrupt("return");case 6:if(!n.name.includes(".csv")){t.next=15;break}return t.next=9,new Promise((function(e){var t=new FileReader;t.onload=function(){var t=(0,P.Z)(regeneratorRuntime.mark((function t(n){var s,i,o,u,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=n.target.result.split("\n"),i=(0,J.Z)(s),t.prev=2,i.s();case 4:if((o=i.n()).done){t.next=13;break}if(u=o.value,c=u.trim().split(";"),1!==c.length){t.next=11;break}return l={id_eval:r,name:c[0]},t.next=11,F.addCriteriaToDb(a,l);case 11:t.next=4;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](2),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:e();case 22:case"end":return t.stop()}}),t,null,[[2,15,18,21]])})));return function(e){return t.apply(this,arguments)}}(),t.readAsText(n)}));case 9:return t.next=11,F.getCriteriasFromDb(e.db,e.id);case 11:e.criterias=t.sent,e.addDisabled=!1,t.next=16;break;case 15:e.showError=!0;case 16:e.showImport=!1;case 17:case"end":return t.stop()}}),t)})))()}}},ve=fe,he=(0,l.Z)(ve,me,pe,!1,null,null,null),ge=he.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready?n("div",[null!=e.currently_rating[0]?n("div",[n("BasicListDisplay",{attrs:{"element-list":e.students,ready:e.ready,"message-display-condition":!0,title:e.title,"element-list-left":"Élève","element-list-right":"Moyenne"},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("div",{staticClass:"headerList"},[n("div",{staticClass:"headerCenter"},[n("button",{staticClass:"btn",on:{click:e.deleteCurrentlyRating}},[e._v("Changer de groupe et/ou d'évaluation")]),n("p",[e._v("Moyenne général : "+e._s(e.moyenneG)+"%")]),n("p",[e._v("Ecart type général : "+e._s(e.ecartG))])]),n("div",{staticClass:"headerLeft"},[n("p",[e._v("Moyenne min : "+e._s(e.minG)+"%")])]),n("div",{staticClass:"headerRight"},[n("p",[e._v("Moyenne max : "+e._s(e.maxG)+"%")]),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.createAndDownloadCsv}},[e._v("Exporter en CSV")])])])]},proxy:!0},{key:"element_show_display",fn:function(t){return[n("div",{staticClass:"oneLine",on:{click:function(n){return e.rateStudent(t.element.id_student)}}},[n("div",{staticClass:"listItemLeft",class:t.element.isComplet?"":"red"},[e._v(" "+e._s(t.element.firstname)+" "+e._s(t.element.lastname)+" ")]),n("div",{staticClass:"listItemRight"},[n("p",[e._v(e._s(t.element.avg)+"%")])])])]}},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn mt-4 delete-button",on:{click:e.deleteAllRating}},[e._v("Réinitialiser")])]},proxy:!0}],null,!1,2641613521)}),e.showAlert?n("BasicAlertDisplay",{attrs:{ready:e.ready},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("h2",[e._v("Entrain d'évaluer "+e._s(e.currentStudent.firstname)+" "+e._s(e.currentStudent.lastname))]),n("p",[e._v("Moyenne : "+e._s(e.currentStudent.avg)+"%")]),n("div",{staticClass:"listRating"},e._l(e.criterias,(function(t){return n("div",{key:t.id,staticClass:"w-full"},[n("table",{staticClass:"rating"},[n("tr",[n("td",{staticClass:"title",class:t.class,attrs:{colspan:"4"}},[e._v(e._s(t.name_crit))])]),n("tr",{staticClass:"inputRate"},[n("td",{attrs:{colspan:"4"}},[n("div",{staticClass:"slider"},[n("button",{staticClass:"btnSlider",on:{click:function(n){return e.changeScore(t.id_crit,-1)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-minus"}})],1),n("span",[e._v(e._s(t.score)+"%")]),n("button",{staticClass:"btnSlider",on:{click:function(n){return e.changeScore(t.id_crit,1)}}},[n("font-awesome-icon",{attrs:{icon:"fa-solid fa-plus"}})],1)]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sliderVal[t.id_crit],expression:"sliderVal[crit.id_crit]"}],attrs:{type:"range",min:"0",max:"100"},domProps:{value:e.sliderVal[t.id_crit]},on:{change:function(n){return e.changeScore(t.id_crit,0)},__r:function(n){return e.$set(e.sliderVal,t.id_crit,n.target.value)}}})])]),n("tr",{staticClass:"infoCrit"},[n("td",{on:{click:function(t){return e.simpleAlert("Pourcentage minimum du groupe")}}},[e._v(e._s(t.min)+"%")]),n("td",{on:{click:function(t){return e.simpleAlert("Pourcentage maximum du groupe")}}},[e._v(e._s(t.max)+"%")]),n("td",{on:{click:function(t){return e.simpleAlert("Moyenne du groupe")}}},[e._v(e._s(t.avg)+"%")]),n("td",{on:{click:function(t){return e.simpleAlert("Ecart type")}}},[e._v(e._s(t.ecart))])])])])})),0)]},proxy:!0},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn add-button",on:{click:e.updateScore}},[e._v("Valider")]),n("button",{staticClass:"btn cancel-button",on:{click:function(t){e.showAlert=!1}}},[e._v("Annuler")]),n("button",{staticClass:"btn mt-4 delete-button",on:{click:function(t){return e.deleteStudentRating(e.currentStudent.id_student)}}},[e._v("Réinitialiser")])]},proxy:!0}],null,!1,227369252)}):e._e(),e.showSimpleAlert?n("BasicAlertDisplay",{attrs:{ready:e.ready,"is-little":!0},scopedSlots:e._u([{key:"element_display",fn:function(){return[n("h1",[e._v("Information")]),n("p",[e._v(e._s(e.simpleMsg))])]},proxy:!0},{key:"input_field",fn:function(){return[n("button",{staticClass:"btn cancel-button",on:{click:function(t){e.showSimpleAlert=!1}}},[e._v("Annuler")])]},proxy:!0}],null,!1,522085924)}):e._e()],1):n("div",{staticClass:"basicDisplay"},[n("div",{staticClass:"basicCenter choice"},[n("h2",[e._v("Choisissez une évaluation et un groupe")]),0===e.evaluations.length?n("p",[e._v("Aucune évaluation, veuillez en créer une ")]):n("label",[n("span",[e._v("Evaluations :")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedEval,expression:"selectedEval"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedEval=t.target.multiple?n:n[0]}}},e._l(e.evaluations,(function(t){return n("option",{key:t.id,domProps:{value:t.id_eval}},[e._v(e._s(t.name))])})),0)]),0===e.groups.length?n("p",[e._v("Aucun groupe, veuillez en créer un ")]):n("label",[n("span",[e._v("Groupe :")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedGroup,expression:"selectedGroup"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedGroup=t.target.multiple?n:n[0]}}},e._l(e.groups,(function(t){return n("option",{key:t.id,domProps:{value:t.id_class}},[e._v(e._s(t.name))])})),0)]),n("button",{staticClass:"mt-4 btn add-button",attrs:{disabled:e.addDisabled},on:{click:e.addCurrentlyRating}},[e._v("Valider")])])])]):e._e()},we=[],_e=(n(6977),n(4747),n(8783),n(3948),n(9600),n(5306),{name:"RateView",components:{BasicAlertDisplay:te,BasicListDisplay:U},data:function(){return{id_student:0,title:"",moyenneG:0,minG:0,maxG:0,ecartG:0,db:null,ready:!1,addDisabled:!1,currentStudent:null,currently_rating:[],evaluations:[],groups:[],selectedGroup:"",selectedEval:"",evalName:"",groupName:"",sliderVal:[],students:[],criterias:[],showAlert:!1,showSimpleAlert:!1,simpleMsg:""}},created:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getDb();case 2:return e.db=t.sent,t.next=5,F.getCurrentlyRatingFromDb(e.db);case 5:if(e.currently_rating=t.sent,0!==e.currently_rating.length){t.next=15;break}return t.next=9,F.getEvaluationFromDb(e.db);case 9:return e.evaluations=t.sent,t.next=12,F.getClassroomFromDb(e.db);case 12:e.groups=t.sent,t.next=32;break;case 15:return t.next=17,F.getEvaluationNameFromDb(e.db,e.currently_rating[0].id_eval);case 17:return e.evalName=t.sent,t.next=20,F.getClassNameFromDb(e.db,e.currently_rating[0].id_class);case 20:return e.groupName=t.sent,t.next=23,F.getStudentOfClassFromDb(e.db,e.currently_rating[0].id_class);case 23:return e.students=t.sent,t.next=26,F.getCriteriasFromDb(e.db,e.currently_rating[0].id_eval);case 26:return e.criterias=t.sent,t.next=29,e.updateInfoOfStudent();case 29:return t.next=31,e.updateRatingInfo();case 31:e.title="Entrain de noter le groupe "+e.groupName+" sur l'évaluation "+e.evalName;case 32:e.ready=!0;case 33:case"end":return t.stop()}}),t)})))()},methods:{updateInfoOfStudent:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n,a,s,i,o,u,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0,a=0,s=[],i=(0,J.Z)(e.students),t.prev=4,i.s();case 6:if((o=i.n()).done){t.next=19;break}return u=o.value,c=e.students.indexOf(u),t.next=11,F.getAvgStudent(e.db,u.id_student);case 11:return u.avg=t.sent,t.next=14,F.isCompletRatingStudent(e.db,u.id_student,e.currently_rating[0].id_eval);case 14:u.isComplet=t.sent,r.Z.set(e.students,c,u),isNaN(u.avg)||(s.push(u.avg),n+=u.avg,a++);case 17:t.next=6;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](4),i.e(t.t0);case 24:return t.prev=24,i.f(),t.finish(24);case 27:0!==s.length?(e.moyenneG=(n/a).toFixed(2),e.minG=Math.min.apply(Math,s).toFixed(2),e.maxG=Math.max.apply(Math,s).toFixed(2),l=0,s.forEach((function(t){l+=Math.pow(parseInt(t)-e.moyenneG,2)})),e.ecartG=Math.pow(l/a,.5).toFixed(2)):(e.minG="--",e.maxG="--",e.moyenneG="--",e.ecartG="--"),1===s.length&&(e.ecartG="--");case 29:case"end":return t.stop()}}),t,null,[[4,21,24,27]])})))()},deleteStudentRating:function(e){var t=this;return(0,P.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,F.deleteRatingOfStudent(t.db,e);case 2:return n.next=4,t.updateInfoOfStudent();case 4:return n.next=6,t.updateRatingInfo();case 6:t.showAlert=!1;case 7:case"end":return n.stop()}}),n)})))()},updateRatingInfo:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=(0,J.Z)(e.criterias),t.prev=1,s=regeneratorRuntime.mark((function t(){var n,s,i,o,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.value,s=e.criterias.indexOf(n),t.next=4,F.getRatingFromDb(e.db,e.currently_rating[0].id_class,n.id_crit,e.id_student);case 4:i=t.sent,0===i.length&&"--"===n.score?(n.min="--",n.max="--",n.avg="--",n.ecart="--"):(isNaN(parseInt(n.score))||i.push(parseInt(n.score)),0!==i.length?(n.min=Math.min.apply(Math,i).toFixed(2),n.max=Math.max.apply(Math,i).toFixed(2),o=0,u=0,i.forEach((function(e){o+=e,u++})),n.avg=(o/u).toFixed(2),c=0,i.forEach((function(e){c+=Math.pow(parseInt(e)-n.avg,2)})),n.ecart=Math.pow(c/u,.5).toFixed(2)):(n.min="--",n.max="--",n.avg="--",n.ecart="--"),1===i.length&&(n.ecart="--")),r.Z.set(e.criterias,s,n);case 7:case"end":return t.stop()}}),t)})),n.s();case 4:if((a=n.n()).done){t.next=8;break}return t.delegateYield(s(),"t0",6);case 6:t.next=4;break;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t["catch"](1),n.e(t.t1);case 13:return t.prev=13,n.f(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))()},updateScore:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=(0,J.Z)(e.criterias),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=11;break}if(a=r.value,!0!==a.isUpdate){t.next=9;break}return s={id_crit:parseInt(a.id_crit),id_student:parseInt(e.id_student),score:parseInt(a.score)},t.next=9,F.updateRatingToDb(e.db,s);case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),n.e(t.t0);case 16:return t.prev=16,n.f(),t.finish(16);case 19:return t.next=21,e.updateInfoOfStudent();case 21:return t.next=23,e.updateRatingInfo();case 23:e.showAlert=!1;case 24:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})))()},deleteAllRating:function(){var e=this;return(0,P.Z)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=(0,J.Z)(e.students),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return a=r.value,t.next=7,F.deleteRatingOfStudent(e.db,a.id_student);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:return t.next=19,e.updateInfoOfStudent();case 19:return t.next=21,e.updateRatingInfo();case 21:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))()},simpleAlert:function(e){this.simpleMsg=e,this.showSimpleAlert=!0},changeScore:function(e,t){var n=this;return(0,P.Z)(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.$emit("changeFoo",n.sliderVal),s=0,i=0,n.criterias.forEach((function(a,o){a.id_crit===e&&(n.sliderVal[e]=parseInt(n.sliderVal[e])+t,a.score=parseInt(n.sliderVal[e]),a.isUpdate=!0,a.class="orange",r.Z.set(n.criterias,o,a)),isNaN(a.score)||(s+=a.score,i++)})),n.currentStudent.avg=isNaN(s/i)?"--":s/i,a.next=7,n.updateRatingInfo();case 7:case"end":return a.stop()}}),a)})))()},rateStudent:function(){var e=(0,P.Z)(regeneratorRuntime.mark((function e(t){var n,a,s,i,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.id_student=t,e.next=3,F.getStudentFromDb(this.db,t);case 3:this.currentStudent=e.sent,n=0,a=0,s=(0,J.Z)(this.criterias),e.prev=7,s.s();case 9:if((i=s.n()).done){e.next=18;break}return o=i.value,e.next=13,F.getRatingOfStudentFromDb(this.db,t,o.id_crit);case 13:u=e.sent,0===u.length?(o.score="--",o.class="red",r.Z.set(this.sliderVal,o.id_crit,50)):(o.id_student=t,o.score=u[0].score,o.class="green",r.Z.set(this.sliderVal,o.id_crit,o.score),n+=u[0].score,a++),o.isUpdate=!1;case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](7),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return this.currentStudent.avg=isNaN(n/a)?"--":n/a,e.next=29,this.updateRatingInfo();case 29:return e.next=31,this.updateInfoOfStudent();case 31:this.showAlert=!0;case 32:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));function t(t){return e.apply(this,arguments)}return t}(),addCurrentlyRating:function(){var e=(0,P.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===this.selectedEval||""===this.selectedGroup){e.next=25;break}return this.addDisabled=!0,t={id_class:this.selectedGroup,id_eval:this.selectedEval},e.next=5,F.addCurrentlyRatedtToDb(this.db,t);case 5:return e.next=7,F.getCurrentlyRatingFromDb(this.db,this.id);case 7:return this.currently_rating=e.sent,e.next=10,F.getEvaluationNameFromDb(this.db,this.currently_rating[0].id_eval);case 10:return this.evalName=e.sent,e.next=13,F.getClassNameFromDb(this.db,this.currently_rating[0].id_class);case 13:return this.groupName=e.sent,e.next=16,F.getStudentOfClassFromDb(this.db,this.currently_rating[0].id_class);case 16:return this.students=e.sent,e.next=19,F.getCriteriasFromDb(this.db,this.currently_rating[0].id_eval);case 19:return this.criterias=e.sent,this.addDisabled=!1,e.next=23,this.updateRatingInfo();case 23:return e.next=25,this.updateInfoOfStudent();case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteCurrentlyRating:function(){var e=(0,P.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.deleteCurrentlyRatingToDb(this.db,this.currently_rating[0]);case 2:return e.next=4,F.getCurrentlyRatingFromDb(this.db,this.id);case 4:return this.currently_rating=e.sent,e.next=7,F.getEvaluationFromDb(this.db);case 7:return this.evaluations=e.sent,e.next=10,F.getClassroomFromDb(this.db);case 10:this.groups=e.sent;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createAndDownloadCsv:function(){var e=(0,P.Z)(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o,u,c,l,d,m,p,f,v,h,g,b,w,_,x,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[/[\300-\306]/g,/[\340-\346]/g,/[\310-\313]/g,/[\350-\353]/g,/[\314-\317]/g,/[\354-\357]/g,/[\322-\330]/g,/[\362-\370]/g,/[\331-\334]/g,/[\371-\374]/g,/[\321]/g,/[\361]/g,/[\307]/g,/[\347]/g],n=["A","a","E","e","I","i","O","o","U","u","N","n","C","c"],r=[],r.push([this.evalName]),a=["Nom","Prenom"],s=(0,J.Z)(this.criterias);try{for(s.s();!(i=s.n()).done;){for(o=i.value,u=o.name_crit,c=0;c<t.length;c++)u=u.replace(t[c],n[c]);a.push(u)}}catch(C){s.e(C)}finally{s.f()}r.push(a),l=(0,J.Z)(this.students),e.prev=9,l.s();case 11:if((d=l.n()).done){e.next=39;break}for(m=d.value,p=m.lastname,f=m.firstname,v=0;v<t.length;v++)p=p.replace(t[v],n[v]),f=f.replace(t[v],n[v]);h=[p,f],g=(0,J.Z)(this.criterias),e.prev=18,g.s();case 20:if((b=g.n()).done){e.next=28;break}return w=b.value,e.next=24,F.getRatingOfStudentFromDb(this.db,m.id_student,w.id_crit);case 24:_=e.sent,_[0]?h.push(_[0].score):h.push("none");case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](18),g.e(e.t0);case 33:return e.prev=33,g.f(),e.finish(33);case 36:r.push(h);case 37:e.next=11;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e["catch"](9),l.e(e.t1);case 44:return e.prev=44,l.f(),e.finish(44);case 47:x="",r.forEach((function(e){x+=e.join(";"),x+="\n"})),y=document.createElement("a"),y.href="data:text/csv;charset=utf-8,"+encodeURI(x),y.target="_blank",y.download="Notes.csv",y.click();case 54:case"end":return e.stop()}}),e,this,[[9,41,44,47],[18,30,33,36]])})));function t(){return e.apply(this,arguments)}return t}()}}),xe=_e,ye=(0,l.Z)(xe,be,we,!1,null,null,null),Ce=ye.exports;r.Z.use(_.Z);var ke=[{path:"/home",name:"home",component:E},{path:"/classrooms",name:"ShowClassrooms",component:H},{path:"/classroom/:id",name:"ShowOneClassroom",component:se},{path:"/evaluations",name:"ShowEvaluations",component:de},{path:"/evaluation/:id",name:"ShowOneEvaluation",component:ge},{path:"/rate",name:"Rate",component:Ce}],Re=new _.Z({routes:ke}),De=Re;g.vI.add(b.mRB),r.Z.component("font-awesome-icon",w.GN),r.Z.component("font-awesome-layers",w.NH),r.Z.component("font-awesome-layers-text",w.M_),r.Z.config.productionTip=!1,new r.Z({router:De,render:function(e){return e(h)}}).$mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r](s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,s){if(!r){var i=1/0;for(l=0;l<e.length;l++){r=e[l][0],a=e[l][1],s=e[l][2];for(var o=!0,u=0;u<r.length;u++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(o=!1,s<i&&(i=s));if(o){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[r,a,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,s,i=r[0],o=r[1],u=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(u)var l=u(n)}for(t&&t(r);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},r=self["webpackChunkprojet2022"]=self["webpackChunkprojet2022"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(4392)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.c5f5b239.js.map