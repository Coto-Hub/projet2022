(function(){"use strict";var t={3951:function(t,e,a){var s=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("MainDisplay",{attrs:{"app-title":"Evaluations"}},[a("div",{staticClass:"container",attrs:{id:"app"}},[a("nav",[a("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),a("router-link",{attrs:{to:"/classrooms"}},[t._v("Group")]),t._v(" | "),a("router-link",{attrs:{to:"/evaluations"}},[t._v("Evaluations")])],1),a("router-view")],1)])},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("header",{staticClass:"header"},[a("h1",[t._v(t._s(t.appTitle))])]),a("main",[t._t("default")],2),t._m(0)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("h1",{staticClass:"footer_text"},[t._v("Site by Coto & Alexis")])])}],l={name:"MainDisplay",props:{appTitle:String}},d=l,u=a(1001),c=(0,u.Z)(d,r,o,!1,null,"f4a844cc",null),m=c.exports,p={components:{MainDisplay:m}},h=p,f=(0,u.Z)(h,n,i,!1,null,null,null),b=f.exports,v=a(81),_=a(6978),y=a(9009),g=a(2809),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Home")],1)},C=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("router-link",{staticClass:"big-btn",attrs:{to:{name:"Rate"}}},[t._v("Evaluer")])],1)},k=[],S={name:"Home"},A=S,T=(0,u.Z)(A,D,k,!1,null,null,null),E=T.exports,x={name:"HomeView",components:{Home:E}},j=x,N=(0,u.Z)(j,w,C,!1,null,null,null),P=N.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasicListDisplay",{attrs:{title:t.title,"element-list":t.classrooms,ready:t.ready,"mutable-object-add":t.studentToAdd,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.name)+" ")]),a("div",{staticClass:"listItemRight"},[a("router-link",{attrs:{to:{name:"ShowOneClassroom",params:{id:e.element.id_class}}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)],1)]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{placeholder:"Nom du groupe",type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),a("button",{staticClass:"btn add-button",attrs:{disabled:t.addDisabled},on:{click:t.addClass}},[t._v("Ajouter")])]}}])})},O=[],F={async getDb(){return new Promise(((t,e)=>{let a=window.indexedDB.open("evaluationDB",1);a.onerror=t=>{console.log("Error opening db",t),e("Error")},a.onsuccess=e=>{t(e.target.result)},a.onupgradeneeded=t=>{console.log("onupgradeneeded");let e=t.target.result;e.createObjectStore("classroom",{autoIncrement:!0,keyPath:"id_class"}),e.createObjectStore("evaluation",{autoIncrement:!0,keyPath:"id_eval"}),e.createObjectStore("student",{autoIncrement:!0,keyPath:"id_student"}),e.createObjectStore("criteria",{autoIncrement:!0,keyPath:"id_crit"}),e.createObjectStore("rating",{autoIncrement:!0,keyPath:"id_rat"}),e.createObjectStore("currently_rating",{autoIncrement:!0,keyPath:"id_curr"})}}))},async addClassToDb(t,e){return new Promise((a=>{let s=t.transaction(["classroom"],"readwrite").objectStore("classroom").add(e);s.onsuccess=function(){a()}}))},async deleteClassFromDb(t,e){return new Promise((a=>{let s=t.transaction(["student"],"readwrite").objectStore("student");s.openCursor().onsuccess=function(t){let a=t.target.result;a&&(parseInt(a.value.id_class)===parseInt(e)&&s.delete(a.value.id_student),a.continue())};let n=t.transaction(["classroom"],"readwrite").objectStore("classroom").delete(e);n.onsuccess=function(){a()}}))},async getClassroomFromDb(t){return new Promise((e=>{t.transaction(["classroom"],"readwrite").objectStore("classroom").getAll().onsuccess=function(t){e(t.target.result)}}))},async getClassNameFromDb(t,e){return new Promise((a=>{t.transaction(["classroom"],"readwrite").objectStore("classroom").get(e).onsuccess=function(t){a(t.target.result.name)}}))},async updateClassToDb(t,e){return new Promise((a=>{let s=t.transaction(["classroom"],"readwrite").objectStore("classroom"),n=s.get(e.id_class);n.onsuccess=function(){s.put(e).onsuccess=function(){a()}}}))},async getStudentOfClassFromDb(t,e){return new Promise((a=>{let s=[];t.transaction(["student"],"readonly").objectStore("student").openCursor().onsuccess=function(t){let a=t.target.result;a&&(parseInt(a.value.id_class)===parseInt(e)&&s.push(a.value),a.continue())},a(s)}))},async addStudentToDb(t,e){return new Promise((a=>{let s=t.transaction(["student"],"readwrite").objectStore("student").add(e);s.onsuccess=function(){a()}}))},async updateStudentToDb(t,e){return new Promise((a=>{let s=t.transaction(["student"],"readwrite").objectStore("student"),n=s.get(e.id_student);n.onsuccess=function(){s.put(e).onsuccess=function(){a()}}}))},async deleteStudentToDb(t,e){return new Promise((a=>{t.transaction(["student"],"readwrite").objectStore("student").delete(e.id_student),a()}))},async addEvalToDb(t,e){return new Promise((a=>{let s=t.transaction(["evaluation"],"readwrite").objectStore("evaluation").add(e);s.onsuccess=function(){a()}}))},async updateEvalToDb(t,e){return new Promise((a=>{let s=t.transaction(["evaluation"],"readwrite").objectStore("evaluation"),n=s.get(e.id_eval);n.onsuccess=function(){s.put(e).onsuccess=function(){a()}}}))},async deleteEvalFromDb(t,e){return new Promise((a=>{let s=t.transaction(["criteria"],"readwrite").objectStore("criteria");s.openCursor().onsuccess=function(t){let a=t.target.result;a&&(parseInt(a.value.id_eval)===parseInt(e)&&s.delete(a.value.id_crit),a.continue())};let n=t.transaction(["evaluation"],"readwrite").objectStore("evaluation").delete(e);n.onsuccess=function(){a()}}))},async getEvaluationFromDb(t){return new Promise((e=>{t.transaction(["evaluation"],"readwrite").objectStore("evaluation").getAll().onsuccess=function(t){e(t.target.result)}}))},async getEvaluationNameFromDb(t,e){return new Promise((a=>{t.transaction(["evaluation"],"readwrite").objectStore("evaluation").get(e).onsuccess=function(t){a(t.target.result.name)}}))},getCriteriasFromDb(t,e){return new Promise((a=>{let s=[];t.transaction(["criteria"],"readonly").objectStore("criteria").openCursor().onsuccess=function(t){let a=t.target.result;a&&(parseInt(a.value.id_eval)===parseInt(e)&&s.push(a.value),a.continue())},a(s)}))},addCriteriaToDb(t,e){return new Promise((a=>{let s=t.transaction(["criteria"],"readwrite").objectStore("criteria").add(e);s.onsuccess=function(){a()}}))},async updateCriteriaToDb(t,e){return new Promise((a=>{let s=t.transaction(["criteria"],"readwrite").objectStore("criteria"),n=s.get(e.id_crit);n.onsuccess=function(){s.put(e).onsuccess=function(){a()}}}))},async deleteCriteriaToDb(t,e){return new Promise((a=>{t.transaction(["criteria"],"readwrite").objectStore("criteria").delete(e.id_crit),a()}))},async getCurrentlyRatingFromDb(t){return new Promise((e=>{t.transaction(["currently_rating"],"readwrite").objectStore("currently_rating").getAll().onsuccess=function(t){e(t.target.result)}}))},async addCurrentlyRatedtToDb(t,e){return new Promise((a=>{let s=t.transaction(["currently_rating"],"readwrite").objectStore("currently_rating").add(e);s.onsuccess=function(){a()}}))},async deleteCurrentlyRatingToDb(t,e){return new Promise((a=>{t.transaction(["currently_rating"],"readwrite").objectStore("currently_rating").delete(e.id_curr),a()}))}},B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"basicListDisplay"},[a("h1",[t._v(t._s(t.title))]),a("div",[t._t("element_display",null,{mutable:t.mutableObjectUpdate})],2),a("ul",{staticClass:"list"},t._l(t.elementList,(function(e){return a("li",{key:e.id,staticClass:"listItem"},[e.updated?a("div",[t._t("element_update_display",null,{element:e})],2):a("div",[t._t("element_show_display",null,{element:e})],2)])})),0),a("div",{staticClass:"add display-input"},[t._t("input_field",null,{mutable:t.mutableObjectAdd}),a("p",{staticClass:"warning"},[t._v(t._s(t.warningMessage))])],2)]):t._e()},$=[],L={name:"BasicListDisplay",props:{ready:Boolean,elementList:Array,title:String,mutableObjectAdd:Object,mutableObjectUpdate:Object,messageDisplayCondition:Boolean},computed:{warningMessage:function(){return this.messageDisplayCondition?"":"Veuillez remplir le(s) champ(s)"}},methods:{}},R=L,U=(0,u.Z)(R,B,$,!1,null,null,null),Z=U.exports,G={name:"ClassView",components:{BasicListDisplay:Z},props:{},data:function(){return{title:"Gestion des groupes",db:null,ready:!1,addDisabled:!1,classrooms:[],studentToAdd:{name:""}}},async created(){this.db=await F.getDb(),this.classrooms=await F.getClassroomFromDb(this.db),this.ready=!0},computed:{showCondition:function(){return""!==this.studentToAdd.name}},methods:{async addClass(){this.addDisabled=!0;let t={name:this.studentToAdd.name};console.log("about to add "+JSON.stringify(t)),await F.addClassToDb(this.db,t),this.classrooms=await F.getClassroomFromDb(this.db),this.addDisabled=!1},async deleteClass(t){await F.deleteClassFromDb(this.db,t),this.classrooms=await F.getClassroomFromDb(this.db)}}},V=G,M=(0,u.Z)(V,I,O,!1,null,null,null),z=M.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BasicListDisplay",{attrs:{"element-list":t.students,ready:t.ready,"mutable-object-add":t.studentToAdd,title:t.title,"mutable-object-update":t.nameToUpdate,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_display",fn:function(e){return[a("div",{staticClass:"headerList"},[a("div",{staticClass:"headerLeft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),t.showUpdateClassName?a("a",{staticClass:"check",on:{click:t.updateClassName}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1):a("a",{staticClass:"check disabled"},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1)]),a("div",{staticClass:"headerRight"},[a("a",{staticClass:"upload",on:{click:function(e){t.showImport=!0}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-upload"}})],1),a("a",{staticClass:"delete",on:{click:function(e){t.showAlert=!0}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])])]}},{key:"element_update_display",fn:function(e){return[a("div",{staticClass:"listItemLeft display-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.firstname,expression:"slotProps.element.firstname"}],attrs:{type:"text"},domProps:{value:e.element.firstname},on:{input:function(a){a.target.composing||t.$set(e.element,"firstname",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.lastname,expression:"slotProps.element.lastname"}],attrs:{type:"text"},domProps:{value:e.element.lastname},on:{input:function(a){a.target.composing||t.$set(e.element,"lastname",a.target.value)}}})]),a("div",{staticClass:"listItemRight"},[a("a",{staticClass:"check",on:{click:function(a){return t.updateStudent(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1),a("a",{staticClass:"delete",on:{click:function(a){return t.deleteStudent(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])]}},{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.firstname)+" "+t._s(e.element.lastname)+" ")]),a("div",{staticClass:"listItemRight"},[a("a",{staticClass:"update",on:{click:function(a){return t.toggleUpdateStudent(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)])]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.firstname,expression:"slotProps.mutable.firstname"}],attrs:{placeholder:"Prénom",type:"text"},domProps:{value:e.mutable.firstname},on:{input:function(a){a.target.composing||t.$set(e.mutable,"firstname",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.lastname,expression:"slotProps.mutable.lastname"}],attrs:{placeholder:"Nom",type:"text"},domProps:{value:e.mutable.lastname},on:{input:function(a){a.target.composing||t.$set(e.mutable,"lastname",a.target.value)}}}),a("button",{staticClass:"mt-4 btn add-button",attrs:{disabled:t.addDisabled},on:{click:t.addStudent}},[t._v("Ajouter")])]}}])}),t.showAlert?a("BasicAlertDisplay",{attrs:{ready:t.ready,"is-little":!0},scopedSlots:t._u([{key:"element_display",fn:function(){return[a("h1",[t._v("Alerte")]),a("p",[t._v("Voulez-vous vraiment supprimer ce groupe ?")])]},proxy:!0},{key:"input_field",fn:function(){return[a("button",{staticClass:"btn delete-button",attrs:{disabled:t.deleteDisabled},on:{click:t.deleteClass}},[t._v("Supprimer")]),a("button",{staticClass:"btn cancel-button",attrs:{disabled:t.cancelDisabled},on:{click:function(e){t.showAlert=!1}}},[t._v("Annuler")])]},proxy:!0}],null,!1,2837483475)}):t._e(),t.showImport?a("BasicAlertDisplay",{attrs:{ready:t.ready,message:"Veuillez renseigner un fichier .cvs","show-message":t.showError,"is-little":!1},scopedSlots:t._u([{key:"element_display",fn:function(){return[a("h1",[t._v("Importer une liste")]),a("p",[t._v("Selectionner un fichier")]),a("input",{ref:"file",attrs:{type:"file"}})]},proxy:!0},{key:"input_field",fn:function(){return[a("button",{staticClass:"btn add-button",attrs:{disabled:t.deleteDisabled},on:{click:t.importStudent}},[t._v("Ajouter")]),a("button",{staticClass:"btn cancel-button",attrs:{disabled:t.cancelDisabled},on:{click:function(e){t.showImport=!1}}},[t._v("Annuler")])]},proxy:!0}],null,!1,877271373)}):t._e()],1)},J=[],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"basicAlertDisplay"},[a("div",{staticClass:"alertBox",class:t.isLittle?" little":"middle"},[a("div",{staticClass:"headerBox"},[t._t("element_display")],2),a("div",{staticClass:"footerBox"},[t._t("input_field")],2),t.showMessage?a("p",{staticClass:"red"},[t._v(t._s(t.message))]):t._e()])]):t._e()},q=[],K={name:"BasicAlertDisplay",props:{ready:Boolean,message:String,showMessage:Boolean,isLittle:Boolean},computed:{},methods:{}},Q=K,W=(0,u.Z)(Q,X,q,!1,null,null,null),Y=W.exports,tt={name:"OneClassView",components:{BasicAlertDisplay:Y,BasicListDisplay:Z},props:{},data:function(){return{title:"Gestion des groupes",db:null,id:null,ready:!1,addDisabled:!1,deleteDisabled:!1,cancelDisabled:!1,showAlert:!1,showError:!1,showImport:!1,students:[],lignes:[],defaultName:"",studentToAdd:{firstname:"",lastname:""},nameToUpdate:{name:""}}},computed:{showCondition:function(){return""!==this.studentToAdd.firstname&&""!==this.studentToAdd.lastname},showUpdateClassName:function(){return this.defaultName!==this.nameToUpdate.name}},async created(){this.db=await F.getDb(),this.id=parseInt(this.$route.params.id),this.students=await F.getStudentOfClassFromDb(this.db,this.id),this.nameToUpdate.name=await F.getClassNameFromDb(this.db,this.id),this.defaultName=this.nameToUpdate.name,this.ready=!0},methods:{toggleUpdateStudent(t){let e=this.students.indexOf(t);return e>=0&&(t.updated=!t.updated,s.Z.set(this.students,e,t)),!1},async importStudent(){let t=this.$refs.file.files[0],e=this.id,a=this.db;t?(t.name.includes(".csv")?(await new Promise((s=>{let n=new FileReader;n.onload=async function(t){let n=t.target.result.split("\n");console.log(t);for(const s of n){let t=s.trim().split(";");if(console.log(t),t.length<2&&(t=s.trim().split(",")),2===t.length){let s={id_class:e,firstname:t[0],lastname:t[1]};await F.addStudentToDb(a,s)}}s()},n.readAsText(t)})),this.students=await F.getStudentOfClassFromDb(this.db,this.id),this.addDisabled=!1):this.showError=!0,this.showImport=!1):this.showError=!0},async updateStudent(t){this.toggleUpdateStudent(t),await F.updateStudentToDb(this.db,t)},async deleteClass(){await F.deleteClassFromDb(this.db,this.id),this.$router.push({name:"ShowClassrooms"})},async updateClassName(){this.defaultName=this.nameToUpdate.name,await F.updateClassToDb(this.db,{id_class:this.id,name:this.nameToUpdate.name})},async deleteStudent(t){let e=this.students.indexOf(t);e>=0&&(t.updated=!t.updated,s.Z["delete"](this.students,e)),await F.deleteStudentToDb(this.db,t)},async addStudent(){if(""!==this.studentToAdd.firstname&&""!==this.studentToAdd.lastname){this.addDisabled=!0;let t={id_class:this.id,firstname:this.studentToAdd.firstname,lastname:this.studentToAdd.lastname};console.log("about to add "+JSON.stringify(t)),await F.addStudentToDb(this.db,t),this.students=await F.getStudentOfClassFromDb(this.db,this.id),this.studentToAdd.firstname="",this.studentToAdd.lastname="",this.addDisabled=!1}}}},et=tt,at=(0,u.Z)(et,H,J,!1,null,null,null),st=at.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasicListDisplay",{attrs:{title:t.title,"element-list":t.evaluations,ready:t.ready,"mutable-object-add":t.evaluationToAdd,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.name)+" ")]),a("div",{staticClass:"listItemRight"},[a("router-link",{attrs:{to:{name:"ShowOneEvaluation",params:{id:e.element.id_eval}}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)],1)]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{placeholder:"Nom de l'évaluation",type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),a("button",{staticClass:"btn add-button",attrs:{disabled:t.addDisabled},on:{click:t.addEvaluation}},[t._v("Ajouter")])]}}])})},it=[],rt={name:"EvaluationView",components:{BasicListDisplay:Z},props:{},data:function(){return{title:"Gestion des évaluations",db:null,ready:!1,addDisabled:!1,evaluations:[],evaluationToAdd:{name:""}}},computed:{showCondition:function(){return""!==this.evaluationToAdd.name}},async created(){this.db=await F.getDb(),this.evaluations=await F.getEvaluationFromDb(this.db),this.ready=!0},methods:{async addEvaluation(){if(""!==this.evaluationToAdd.name){this.addDisabled=!0;let t={name:this.evaluationToAdd.name};console.log("about to add "+JSON.stringify(t)),await F.addEvalToDb(this.db,t),this.evaluations=await F.getEvaluationFromDb(this.db),this.evaluationToAdd.name="",this.addDisabled=!1}}}},ot=rt,lt=(0,u.Z)(ot,nt,it,!1,null,null,null),dt=lt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BasicListDisplay",{attrs:{"element-list":t.criterias,ready:t.ready,"mutable-object-add":t.criteriaToAdd,title:t.title,"mutable-object-update":t.nameToUpdate,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_display",fn:function(e){return[a("div",{staticClass:"headerList"},[a("div",{staticClass:"headerLeft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),t.showUpdateEvalName?a("a",{staticClass:"check",on:{click:t.updateEvalName}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1):a("a",{staticClass:"check disabled"},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1)]),a("div",{staticClass:"headerRight"},[a("a",{staticClass:"upload",on:{click:function(e){t.showImport=!0}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-upload"}})],1),a("a",{staticClass:"delete",on:{click:function(e){t.showAlert=!0}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])])]}},{key:"element_update_display",fn:function(e){return[a("div",{staticClass:"listItemLeft display-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.name_crit,expression:"slotProps.element.name_crit"}],attrs:{type:"text"},domProps:{value:e.element.name_crit},on:{input:function(a){a.target.composing||t.$set(e.element,"name_crit",a.target.value)}}})]),a("div",{staticClass:"listItemRight"},[a("a",{staticClass:"check",on:{click:function(a){return t.updateCriteria(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1),a("a",{staticClass:"delete",on:{click:function(a){return t.deleteCriteria(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])]}},{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.name_crit)+" ")]),a("div",{staticClass:"listItemRight"},[a("a",{staticClass:"update",on:{click:function(a){return t.toggleUpdateCriteria(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)])]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name_crit,expression:"slotProps.mutable.name_crit"}],attrs:{placeholder:"Nom du critére",type:"text"},domProps:{value:e.mutable.name_crit},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name_crit",a.target.value)}}}),a("button",{staticClass:"btn add-button",attrs:{disabled:t.addDisabled},on:{click:t.addCriteria}},[t._v("Ajouter")])]}}])}),t.showAlert?a("BasicAlertDisplay",{attrs:{ready:t.ready,"is-little":!0},scopedSlots:t._u([{key:"element_display",fn:function(){return[a("h1",[t._v("Alerte")]),a("p",[t._v("Voulez-vous vraiment supprimer cette évaluation ?")])]},proxy:!0},{key:"input_field",fn:function(){return[a("button",{staticClass:"btn delete-button",attrs:{disabled:t.deleteDisabled},on:{click:t.deleteEval}},[t._v("Supprimer")]),a("button",{staticClass:"btn cancel-button",attrs:{disabled:t.cancelDisabled},on:{click:function(e){t.showAlert=!1}}},[t._v("Annuler")])]},proxy:!0}],null,!1,259672870)}):t._e(),t.showImport?a("BasicAlertDisplay",{attrs:{ready:t.ready,message:"Veuillez renseigner un fichier .cvs","show-message":t.showError,"is-little":!1},scopedSlots:t._u([{key:"element_display",fn:function(){return[a("h1",[t._v("Importer une liste")]),a("p",[t._v("Selectionner un fichier")]),a("input",{ref:"file",attrs:{type:"file"}})]},proxy:!0},{key:"input_field",fn:function(){return[a("button",{staticClass:"btn add-button",attrs:{disabled:t.deleteDisabled},on:{click:t.importCriteria}},[t._v("Ajouter")]),a("button",{staticClass:"btn cancel-button",attrs:{disabled:t.cancelDisabled},on:{click:function(e){t.showImport=!1}}},[t._v("Annuler")])]},proxy:!0}],null,!1,1223466711)}):t._e()],1)},ct=[],mt={name:"OneEvaluationView",components:{BasicAlertDisplay:Y,BasicListDisplay:Z},props:{},data:function(){return{title:"Gestion des critéres",db:null,id:null,ready:!1,addDisabled:!1,deleteDisabled:!1,cancelDisabled:!1,showAlert:!1,showError:!1,showImport:!1,criterias:[],defaultName:"",criteriaToAdd:{name_crit:""},nameToUpdate:{name:""}}},computed:{showCondition:function(){return""!==this.criteriaToAdd.name_crit},showUpdateEvalName:function(){return this.defaultName!==this.nameToUpdate.name}},async created(){this.db=await F.getDb(),this.id=parseInt(this.$route.params.id),this.criterias=await F.getCriteriasFromDb(this.db,this.id),this.nameToUpdate.name=await F.getEvaluationNameFromDb(this.db,this.id),this.defaultName=this.nameToUpdate.name,this.ready=!0},methods:{toggleUpdateCriteria(t){let e=this.criterias.indexOf(t);return e>=0&&(t.updated=!t.updated,s.Z.set(this.criterias,e,t)),!1},async deleteEval(){await F.deleteEvalFromDb(this.db,this.id),this.$router.push({name:"ShowEvaluations"})},async updateEvalName(){this.defaultName=this.nameToUpdate.name,await F.updateEvalToDb(this.db,{id_eval:this.id,name:this.nameToUpdate.name})},async updateCriteria(t){this.toggleUpdateCriteria(t),await F.updateCriteriaToDb(this.db,t)},async deleteCriteria(t){let e=this.criterias.indexOf(t);e>=0&&(t.updated=!t.updated,s.Z["delete"](this.criterias,e)),await F.deleteCriteriaToDb(this.db,t)},async addCriteria(){if(""!==this.criteriaToAdd.name_crit){this.addDisabled=!0;let t={id_eval:this.id,name_crit:this.criteriaToAdd.name_crit};console.log("about to add "+JSON.stringify(t)),await F.addCriteriaToDb(this.db,t),this.criterias=await F.getCriteriasFromDb(this.db,this.id),this.criteriaToAdd.name_crit="",this.addDisabled=!1}},async importCriteria(){let t=this.$refs.file.files[0],e=this.id,a=this.db;t?(t.name.includes(".csv")?(await new Promise((s=>{let n=new FileReader;n.onload=async function(t){let n=t.target.result.split("\n");for(const s of n){let t=s.trim().split(";");if(1===t.length){let s={id_eval:e,name:t[0]};await F.addCriteriaToDb(a,s)}}s()},n.readAsText(t)})),this.criterias=await F.getCriteriasFromDb(this.db,this.id),this.addDisabled=!1):this.showError=!0,this.showImport=!1):this.showError=!0}}},pt=mt,ht=(0,u.Z)(pt,ut,ct,!1,null,null,null),ft=ht.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",[null!=t.currently_rating[0]?a("div",[a("h2",[t._v(' Entrain de noter le groupe "'+t._s(t.groupName)+'" sur l\'évaluation "'+t._s(t.evalName)+'" ')]),a("button",{on:{click:t.deleteCurrentlyRating}},[t._v("Changer de groupe et/ou d'évaluation")]),t.showAlert?a("BasicAlertDisplay",{attrs:{ready:t.ready},scopedSlots:t._u([{key:"element_display",fn:function(){return[a("h1",[t._v("Entrain d'évaluer XX XX")]),t._l(t.criterias,(function(e){return a("label",{key:e.id},[t._v(" "+t._s(e.name_crit)+" "),a("input",{attrs:{type:"range",min:"0",max:"100"}})])}))]},proxy:!0},{key:"input_field",fn:function(){return[a("button",{staticClass:"btn add-button"},[t._v("Valider")]),a("button",{staticClass:"btn cancel-button",on:{click:function(e){t.showAlert=!1}}},[t._v("Annuler")])]},proxy:!0}],null,!1,2835351342)}):a("BasicListDisplay",{attrs:{"element-list":t.students,ready:t.ready,"message-display-condition":!0},scopedSlots:t._u([{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"oneLine",on:{click:function(a){return t.rateStudent(e.element.id_student)}}},[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.firstname)+" "+t._s(e.element.lastname)+" ")]),a("div",{staticClass:"listItemRight"},[a("table",{staticClass:"rating_quick_view"},[a("tr",t._l(t.criterias,(function(e){return a("th",{key:e.id},[t._v(" "+t._s(e.name_crit)+" ")])})),0),a("tr",t._l(t.criterias,(function(e){return a("td",{key:e.id},[t._v(" 50% ")])})),0)])])])]}}],null,!1,1942556967)})],1):a("div",[a("h2",[t._v("Choisissez une évaluation et un groupe")]),0===t.evaluations.length?a("p",[t._v("Aucune évaluation, veuillez en créer une ")]):a("label",[t._v("Evaluations : "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedEval,expression:"selectedEval"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedEval=e.target.multiple?a:a[0]}}},t._l(t.evaluations,(function(e){return a("option",{key:e.id,domProps:{value:e.id_eval}},[t._v(t._s(e.name))])})),0)]),0===t.groups.length?a("p",[t._v("Aucun groupe, veuillez en créer un ")]):a("label",[t._v("Groupe :"),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedGroup,expression:"selectedGroup"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedGroup=e.target.multiple?a:a[0]}}},t._l(t.groups,(function(e){return a("option",{key:e.id,domProps:{value:e.id_class}},[t._v(t._s(e.name))])})),0)]),a("button",{staticClass:"mt-4 btn add-button",attrs:{disabled:t.addDisabled},on:{click:t.addCurrentlyRating}},[t._v("Valider")])])]):t._e()},vt=[],_t={name:"RateView",components:{BasicAlertDisplay:Y,BasicListDisplay:Z},data:function(){return{db:null,ready:!1,addDisabled:!1,currently_rating:[],evaluations:[],groups:[],selectedGroup:"",selectedEval:"",evalName:"",groupName:"",students:[],criterias:[],showAlert:!1}},async created(){this.db=await F.getDb(),this.currently_rating=await F.getCurrentlyRatingFromDb(this.db),0===this.currently_rating.length?(this.evaluations=await F.getEvaluationFromDb(this.db),this.groups=await F.getClassroomFromDb(this.db)):(this.evalName=await F.getEvaluationNameFromDb(this.db,this.currently_rating[0].id_eval),this.groupName=await F.getClassNameFromDb(this.db,this.currently_rating[0].id_class),this.students=await F.getStudentOfClassFromDb(this.db,this.currently_rating[0].id_class),this.criterias=await F.getCriteriasFromDb(this.db,this.currently_rating[0].id_eval)),this.ready=!0},methods:{rateStudent:function(t){console.log(t),this.showAlert=!0},addCurrentlyRating:async function(){if(""!==this.selectedEval&&""!==this.selectedGroup){this.addDisabled=!0;let t={id_class:this.selectedGroup,id_eval:this.selectedEval};console.log("about to add "+JSON.stringify(t)),await F.addCurrentlyRatedtToDb(this.db,t),this.currently_rating=await F.getCurrentlyRatingFromDb(this.db,this.id),this.evalName=await F.getEvaluationNameFromDb(this.db,this.currently_rating[0].id_eval),this.groupName=await F.getClassNameFromDb(this.db,this.currently_rating[0].id_class),this.students=await F.getStudentOfClassFromDb(this.db,this.currently_rating[0].id_class),this.criterias=await F.getCriteriasFromDb(this.db,this.currently_rating[0].id_eval),this.addDisabled=!1}},deleteCurrentlyRating:async function(){await F.deleteCurrentlyRatingToDb(this.db,this.currently_rating[0]),this.currently_rating=await F.getCurrentlyRatingFromDb(this.db,this.id),this.evaluations=await F.getEvaluationFromDb(this.db),this.groups=await F.getClassroomFromDb(this.db)}}},yt=_t,gt=(0,u.Z)(yt,bt,vt,!1,null,"e1601e7e",null),wt=gt.exports;s.Z.use(g.Z);const Ct=[{path:"/",name:"home",component:P},{path:"/classrooms",name:"ShowClassrooms",component:z},{path:"/classroom/:id",name:"ShowOneClassroom",component:st},{path:"/evaluations",name:"ShowEvaluations",component:dt},{path:"/evaluation/:id",name:"ShowOneEvaluation",component:ft},{path:"/rate",name:"Rate",component:wt}],Dt=new g.Z({routes:Ct});var kt=Dt;v.vI.add(_.mRB),s.Z.component("font-awesome-icon",y.GN),s.Z.component("font-awesome-layers",y.NH),s.Z.component("font-awesome-layers-text",y.M_),s.Z.config.productionTip=!1,new s.Z({router:kt,render:t=>t(b)}).$mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,i){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],i=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(u--,1);var d=n();void 0!==d&&(e=d)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,r=s[0],o=s[1],l=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var u=l(a)}for(e&&e(s);d<r.length;d++)i=r[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkprojet2022"]=self["webpackChunkprojet2022"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3951)}));s=a.O(s)})();
//# sourceMappingURL=app.676973c5.js.map