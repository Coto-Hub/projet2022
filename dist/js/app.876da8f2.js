(function(){"use strict";var t={6979:function(t,e,a){var s=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("MainDisplay",{attrs:{"app-title":"Evaluations"}},[a("div",{staticClass:"container",attrs:{id:"app"}},[a("nav",[a("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),a("router-link",{attrs:{to:"/classrooms"}},[t._v("Group")]),t._v(" | "),a("router-link",{attrs:{to:"/evaluations"}},[t._v("Evaluations")])],1),a("router-view")],1)])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("header",{staticClass:"header"},[a("h1",[t._v(t._s(t.appTitle))])]),a("main",[t._t("default")],2),t._m(0)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("h1",{staticClass:"footer_text"},[t._v("Site by Coto & Alexis")])])}],l={name:"MainDisplay",props:{appTitle:String}},d=l,u=a(1001),c=(0,u.Z)(d,o,r,!1,null,"f4a844cc",null),m=c.exports,p={components:{MainDisplay:m}},f=p,b=(0,u.Z)(f,n,i,!1,null,null,null),h=b.exports,v=a(81),y=a(6978),w=a(9009),_=a(2809),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Home")],1)},C=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"})},S=[],T={name:"Home"},j=T,P=(0,u.Z)(j,D,S,!1,null,null,null),k=P.exports,A={name:"HomeView",components:{Home:k}},O=A,x=(0,u.Z)(O,g,C,!1,null,null,null),E=x.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasicListDisplay",{attrs:{"element-list":t.classrooms,ready:t.ready,"mutable-object-add":t.studentToAdd,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.name)+" ")]),a("div",{staticClass:"listItemRight"},[a("router-link",{attrs:{to:{name:"ShowOneClassroom",params:{id:e.element.id_class}}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)],1)]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{placeholder:"Nom du groupe",type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),t._v(" "),a("button",{attrs:{disabled:t.addDisabled},on:{click:t.addClass}},[t._v("Ajouter")])]}}])})},F=[],$={async getDb(){return new Promise(((t,e)=>{let a=window.indexedDB.open("evaluationDB",1);a.onerror=t=>{console.log("Error opening db",t),e("Error")},a.onsuccess=e=>{t(e.target.result)},a.onupgradeneeded=t=>{console.log("onupgradeneeded");let e=t.target.result;e.createObjectStore("classroom",{autoIncrement:!0,keyPath:"id_class"}),e.createObjectStore("evaluation",{autoIncrement:!0,keyPath:"id_eval"}),e.createObjectStore("student",{autoIncrement:!0,keyPath:"id_student"}),e.createObjectStore("criteria",{autoIncrement:!0,keyPath:"id_crit"})}}))},async addClassToDb(t,e){return new Promise((a=>{let s=t.transaction(["classroom"],"readwrite").objectStore("classroom").add(e);s.onsuccess=function(){a()}}))},async deleteClassFromDb(t,e){return new Promise((a=>{let s=t.transaction(["classroom"],"readwrite").objectStore("classroom").delete(e);s.onsuccess=function(){a()}}))},async getClassroomFromDb(t){return new Promise((e=>{t.transaction(["classroom"],"readwrite").objectStore("classroom").getAll().onsuccess=function(t){e(t.target.result)}}))},async getClassNameFromDb(t,e){return new Promise((a=>{t.transaction(["classroom"],"readwrite").objectStore("classroom").get(e).onsuccess=function(t){a(t.target.result.name)}}))},async updateClassToDb(t,e){return new Promise((a=>{let s=t.transaction(["classroom"],"readwrite").objectStore("classroom"),n=s.get(e.id_class);n.onsuccess=function(){s.put(e).onsuccess=function(){a()}}}))},async getStudentOfClassFromDb(t,e){return new Promise((a=>{let s=[];t.transaction(["student"],"readonly").objectStore("student").openCursor().onsuccess=function(t){let a=t.target.result;a&&(parseInt(a.value.id_class)===parseInt(e)&&s.push(a.value),a.continue())},a(s)}))},async addStudentToDb(t,e){return new Promise((a=>{let s=t.transaction(["student"],"readwrite").objectStore("student").add(e);s.onsuccess=function(){a()}}))},async updateStudentToDb(t,e){return new Promise((a=>{let s=t.transaction(["student"],"readwrite").objectStore("student"),n=s.get(e.id_student);n.onsuccess=function(){s.put(e).onsuccess=function(){a()}}}))},async deleteStudentToDb(t,e){return new Promise((a=>{t.transaction(["student"],"readwrite").objectStore("student").delete(e.id_student),a()}))},async addEvalToDb(t,e){return new Promise((a=>{let s=t.transaction(["evaluation"],"readwrite").objectStore("evaluation").add(e);s.onsuccess=function(){a()}}))},async deleteEvalFromDb(t,e){return new Promise((a=>{let s=t.transaction(["evaluation"],"readwrite").objectStore("evaluation").delete(e);s.onsuccess=function(){a()}}))},async getEvaluationFromDb(t){return new Promise((e=>{t.transaction(["evaluation"],"readwrite").objectStore("evaluation").getAll().onsuccess=function(t){e(t.target.result)}}))},getCriteriasFromDb(t,e){return new Promise((a=>{let s=[],n=t.transaction(["student"],"readonly").objectStore("student").openCursor().onsuccess=function(t){let a=t.target.result;a&&(parseInt(a.value.id_eval)===parseInt(e)&&s.push(a.value),a.continue())};n.onsuccess=function(){a(s)}}))},addCriteriaToDb(t,e){return new Promise((a=>{let s=t.transaction(["criteria"],"readwrite").objectStore("criteria").add(e);s.onsuccess=function(){a()}}))}},I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"basicListDisplay"},[a("div",[t._t("element_display",null,{mutable:t.mutableObjectUpdate})],2),a("ul",{staticClass:"list"},t._l(t.elementList,(function(e){return a("li",{key:e.id,staticClass:"listItem"},[e.updated?a("div",[t._t("element_update_display",null,{element:e})],2):a("div",[t._t("element_show_display",null,{element:e})],2)])})),0),a("div",{staticClass:"add display-input"},[t._t("input_field",null,{mutable:t.mutableObjectAdd}),a("p",{staticClass:"warning"},[t._v(t._s(t.warningMessage))])],2)]):t._e()},Z=[],L={name:"BasicListDisplay",props:{ready:Boolean,elementList:Array,mutableObjectAdd:Object,mutableObjectUpdate:Object,messageDisplayCondition:Boolean},computed:{warningMessage:function(){return this.messageDisplayCondition?"":"Veuillez remplir le(s) champ(s)"}},methods:{}},B=L,U=(0,u.Z)(B,I,Z,!1,null,"6d7f9e3e",null),M=U.exports,H={name:"ClassView",components:{BasicListDisplay:M},props:{},data:function(){return{db:null,ready:!1,addDisabled:!1,classrooms:[],studentToAdd:{name:""}}},async created(){this.db=await $.getDb(),this.classrooms=await $.getClassroomFromDb(this.db),this.ready=!0},computed:{showCondition:function(){return""!==this.studentToAdd.name}},methods:{async addClass(){this.addDisabled=!0;let t={name:this.studentToAdd.name};console.log("about to add "+JSON.stringify(t)),await $.addClassToDb(this.db,t),this.classrooms=await $.getClassroomFromDb(this.db),this.addDisabled=!1},async deleteClass(t){await $.deleteClassFromDb(this.db,t),this.classrooms=await $.getClassroomFromDb(this.db)}}},R=H,V=(0,u.Z)(R,N,F,!1,null,null,null),J=V.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasicListDisplay",{attrs:{"element-list":t.students,ready:t.ready,"mutable-object-add":t.studentToAdd,"mutable-object-update":t.nameToUpdate,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_display",fn:function(e){return[a("div",{staticClass:"headerList"},[a("div",{staticClass:"headerLeft"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),t.showUpdateClassName?a("a",{staticClass:"check",on:{click:t.updateClassName}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1):t._e()]),a("div",{staticClass:"headerRight"},[a("a",{staticClass:"upload"},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-upload"}})],1),a("a",{staticClass:"delete"},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])])]}},{key:"element_update_display",fn:function(e){return[a("div",{staticClass:"listItemLeft display-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.firstname,expression:"slotProps.element.firstname"}],attrs:{type:"text"},domProps:{value:e.element.firstname},on:{input:function(a){a.target.composing||t.$set(e.element,"firstname",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.lastname,expression:"slotProps.element.lastname"}],attrs:{type:"text"},domProps:{value:e.element.lastname},on:{input:function(a){a.target.composing||t.$set(e.element,"lastname",a.target.value)}}})]),a("div",{staticClass:"listItemRight"},[a("a",{staticClass:"check",on:{click:function(a){return t.updateStudent(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-circle-check"}})],1),a("a",{staticClass:"delete",on:{click:function(a){return t.deleteStudent(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash"}})],1)])]}},{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.firstname)+" "+t._s(e.element.lastname)+" ")]),a("div",{staticClass:"listItemRight"},[a("a",{staticClass:"update",on:{click:function(a){return t.toggleUpdateStudent(e.element)}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)])]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.firstname,expression:"slotProps.mutable.firstname"}],attrs:{placeholder:"Prénom",type:"text"},domProps:{value:e.mutable.firstname},on:{input:function(a){a.target.composing||t.$set(e.mutable,"firstname",a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.lastname,expression:"slotProps.mutable.lastname"}],attrs:{placeholder:"Nom",type:"text"},domProps:{value:e.mutable.lastname},on:{input:function(a){a.target.composing||t.$set(e.mutable,"lastname",a.target.value)}}}),t._v(" "),a("button",{staticClass:"mt-4",attrs:{disabled:t.addDisabled},on:{click:t.addStudent}},[t._v("Ajouter")])]}}])})},z=[],q={name:"OneClassView",components:{BasicListDisplay:M},props:{},data:function(){return{db:null,id:null,ready:!1,addDisabled:!1,students:[],defaultName:"",studentToAdd:{firstname:"",lastname:""},nameToUpdate:{name:""}}},computed:{showCondition:function(){return""!==this.studentToAdd.firstname&&""!==this.studentToAdd.lastname},showUpdateClassName:function(){return this.defaultName!==this.nameToUpdate.name}},async created(){this.db=await $.getDb(),this.id=parseInt(this.$route.params.id),this.students=await $.getStudentOfClassFromDb(this.db,this.id),this.nameToUpdate.name=await $.getClassNameFromDb(this.db,this.id),this.defaultName=this.nameToUpdate.name,this.ready=!0},methods:{previewFiles(t){console.log(t.target.files)},toggleUpdateStudent(t){let e=this.students.indexOf(t);return e>=0&&(t.updated=!t.updated,s.Z.set(this.students,e,t)),!1},async updateStudent(t){this.toggleUpdateStudent(t),await $.updateStudentToDb(this.db,t)},async updateClassName(){this.defaultName=this.nameToUpdate.name,await $.updateClassToDb(this.db,{id_class:this.id,name:this.nameToUpdate.name})},async deleteStudent(t){let e=this.students.indexOf(t);e>=0&&(t.updated=!t.updated,s.Z["delete"](this.students,e)),await $.deleteStudentToDb(this.db,t)},async addStudent(){if(""!==this.studentToAdd.firstname&&""!==this.studentToAdd.lastname){this.addDisabled=!0;let t={id_class:this.id,firstname:this.studentToAdd.firstname,lastname:this.studentToAdd.lastname};console.log("about to add "+JSON.stringify(t)),await $.addStudentToDb(this.db,t),this.students=await $.getStudentOfClassFromDb(this.db,this.id),this.studentToAdd.firstname="",this.studentToAdd.lastname="",this.addDisabled=!1}}}},K=q,Q=(0,u.Z)(K,G,z,!1,null,null,null),W=Q.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasicListDisplay",{attrs:{"element-list":t.evaluations,ready:t.ready,"mutable-object-add":t.evaluationToAdd,"message-display-condition":t.showCondition},scopedSlots:t._u([{key:"element_show_display",fn:function(e){return[a("div",{staticClass:"listItemLeft"},[t._v(" "+t._s(e.element.name)+" ")]),a("div",{staticClass:"listItemRight"},[a("router-link",{attrs:{to:{name:"ShowOneEvaluation",params:{id:e.element.id_eval}}}},[a("font-awesome-icon",{attrs:{icon:"fa-solid fa-pencil"}})],1)],1)]}},{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"slotProps.mutable.name"}],attrs:{type:"text"},domProps:{value:e.mutable.name},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name",a.target.value)}}}),t._v(" "),a("button",{attrs:{disabled:t.addDisabled},on:{click:t.addEvaluation}},[t._v("Ajouter")])]}}])})},Y=[],tt={name:"EvaluationView",components:{BasicListDisplay:M},props:{},data:function(){return{db:null,ready:!1,addDisabled:!1,evaluations:[],evaluationToAdd:{name:""}}},computed:{showCondition:function(){return""!==this.evaluationToAdd.name}},async created(){this.db=await $.getDb(),this.evaluations=await $.getEvaluationFromDb(this.db),this.ready=!0},methods:{async addEvaluation(){if(""!==this.evaluationToAdd.name){this.addDisabled=!0;let t={name:this.evaluationToAdd.name};console.log("about to add "+JSON.stringify(t)),await $.addEvalToDb(this.db,t),this.evaluations=await $.getEvaluationFromDb(this.db),this.evaluationToAdd.name="",this.addDisabled=!1}},async deleteEvaluation(t){await $.deleteEvalFromDb(this.db,t),this.evaluations=await $.getEvaluationFromDb(this.db)}}},et=tt,at=(0,u.Z)(et,X,Y,!1,null,null,null),st=at.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasicListDisplay",{attrs:{"element-list":t.criterias,ready:t.ready,"mutable-object":t.criteriaToAdd,"message-display-condition":t.bool},scopedSlots:t._u([{key:"input_field",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name_crit,expression:"slotProps.mutable.name_crit"}],attrs:{type:"text"},domProps:{value:e.mutable.name_crit},on:{input:function(a){a.target.composing||t.$set(e.mutable,"name_crit",a.target.value)}}}),t._v(" "),a("button",{attrs:{disabled:t.addDisabled},on:{click:t.addCriteria}},[t._v("Ajouter le critère")])]}},{key:"element_display",fn:function(e){return[t._v(" "+t._s(e.element.name_crit)+" ")]}}])})},it=[],ot={name:"OneEvaluationView",components:{BasicListDisplay:M},props:{},data:function(){return{db:null,id:null,ready:!1,addDisabled:!1,criterias:[],criteriaToAdd:{name_crit:""}}},computed:{bool:function(){return""!==this.criteriaToAdd.name_crit}},async created(){this.db=await $.getDb(),this.id=this.$route.params.id,this.criterias=await $.getCriteriasFromDb(this.db,this.id),this.ready=!0},methods:{async addCriteria(){if(""!==this.criteriaToAdd.name_crit){this.addDisabled=!0;let t={id_eval:this.id,name_crit:this.criteriaToAdd.name_crit};console.log("about to add "+JSON.stringify(t)),await $.addCriteriaToDb(this.db,t),this.criterias=await $.getCriteriasFromDb(this.db,this.id),this.criteriaToAdd.name_crit="",this.addDisabled=!1}}}},rt=ot,lt=(0,u.Z)(rt,nt,it,!1,null,null,null),dt=lt.exports;s.Z.use(_.Z);const ut=[{path:"/",name:"home",component:E},{path:"/classrooms",name:"ShowClassrooms",component:J},{path:"/classroom/:id",name:"ShowOneClassroom",component:W},{path:"/evaluations",name:"ShowEvaluations",component:st},{path:"/evaluation/:id",name:"ShowOneEvaluation",component:dt}],ct=new _.Z({routes:ut});var mt=ct;v.vI.add(y.mRB),s.Z.component("font-awesome-icon",w.GN),s.Z.component("font-awesome-layers",w.NH),s.Z.component("font-awesome-layers-text",w.M_),s.Z.config.productionTip=!1,new s.Z({router:mt,render:t=>t(h)}).$mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],i=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(u--,1);var d=n();void 0!==d&&(e=d)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,o=s[0],r=s[1],l=s[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var u=l(a)}for(e&&e(s);d<o.length;d++)i=o[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkprojet2022"]=self["webpackChunkprojet2022"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6979)}));s=a.O(s)})();
//# sourceMappingURL=app.876da8f2.js.map